.container
    .jumbotron.subhead
        %h1
            = @page_title = "Modules"
            %p.lead Block Behavior
    %section
        .row
            = partial('modules_sidebar')
            .col-sm-9
                .page-header
                    %h1= @page_sub_title = "Renewables"
                :markdown
                    This module can create regions in which destroyed or altered blocks will gradually be restored to their original state.

                    The `<renewables>` tag can contain any number of `<renewable>` tags. Each `<renewable>` must have a `<region>` tag
                    to limit it to a particular region. Larger regions are more demanding on server resources, so don't make them any
                    larger than necessary. Regions under 10,000 blocks in volume should be safe. If a larger region is needed, it's best to inquire with a PGM developer or administrator first.

                    ##### Renewable Element Attributes
                .table-responsive
                    %table.table.table-striped.table-condensed
                        %thead
                            %tr
                                %th{:style => "min-width: 130px;"} Attribute
                                %th Description
                                %th Default
                        %tbody
                            %tr
                                %td
                                    %code region
                                %td
                                    %span.label.label-default{:title => "Can be either this attribute or a sub-element."} Property
                                    %span.label.label-danger Required
                                    Region where this renewable is located.
                                %td
                                    %a{:href => "/modules/regions"} Bounded Region
                            %tr
                                %td
                                    %code renew-filter
                                %td
                                    %span.label.label-default{:title => "Can be either this attribute or a sub-element."} Property
                                    Filter which/when blocks are renewed.
                                %td
                                    %a{:href => "/modules/filters"} Filter
                            %tr
                                %td
                                    %code replace-filter
                                %td
                                    %span.label.label-default{:title => "Can be either this attribute or a sub-element."} Property
                                    Filter which/when blocks are replaced.
                                %td
                                    %a{:href => "/modules/filters"} Filter
                            %tr
                                %td
                                    %code shuffle-filter
                                %td
                                    %span.label.label-default{:title => "Can be either this attribute or a sub-element."} Property
                                    Filter which/when blocks are shuffled.
                                %td
                                    %a{:href => "/modules/filters"} Filter
                            %tr
                                %td
                                    %code rate
                                %td
                                    Approximate number of blocks that will be restored per second.
                                %td 1
                            %tr
                                %td
                                    %code grow
                                %td
                                    Only allow blocks to be restored adjacent to other blocks that are already restored. If set to false, blocks will be restored at completely random locations, even in mid-air.
                                %td false
                            %tr
                                %td
                                    %code particles
                                %td
                                    Show block restore particle effects.
                                %td true
                            %tr
                                %td
                                    %code sound
                                %td
                                    Play block restore sound effects.
                                %td true
                            %tr
                                %td
                                    %code avoid-entities
                                %td
                                    Prevent blocks from being restored within a few meters of a player.
                                %td true

                %h5 Renewable Sub-elements
                .table-responsive
                    %table.table.table-striped.table-condensed
                        %thead
                            %tr
                                %th Element
                                %th Description
                                %th Value/Children
                        %tbody
                            %tr
                                %td
                                    %pre
                                        %code= html_escape('<region>')
                                %td
                                    %span.label.label-default{:title => "Can be either this sub-element or an attribute."} Property
                                    %span.label.label-danger Required
                                    The region the renewable applies to.
                                %td
                                    %a{:href => "/modules/regions"} Bounded Regions
                            %tr
                                %td
                                    %pre
                                        %code= html_escape('<renew-filter>')
                                %td
                                    %span.label.label-default{:title => "Can be either this sub-element or an attribute."} Property
                                    Filter which/when blocks are renewed.
                                %td
                                    %a{:href => "/modules/filters"} Filters
                            %tr
                                %td
                                    %pre
                                        %code= html_escape('<replace-filter>')
                                %td
                                    %span.label.label-default{:title => "Can be either this sub-element or an attribute."} Property
                                    Filter which/when blocks are replaced.
                                %td
                                    %a{:href => "/modules/filters"} Filters
                            %tr
                                %td
                                    %pre
                                        %code= html_escape('<shuffle-filter>')
                                %td
                                    %span.label.label-default{:title => "Can be either this sub-element or an attribute."} Property
                                    Filter which/when blocks are shuffled.
                                %td
                                    %a{:href => "/modules/filters"} Filters

                :markdown
                    By default, all blocks in the region are renewable. The `<renew-filter>` sub-element can be used inside the `<renewable>` to specify only particular blocks to renew.

                    The `<replace-filter>` element specifies which block types are allowed to be replaced by renewing blocks. Any other type of block in the renewable region will obstruct the renewal process. By default, any block can be replaced.

                    Normally, blocks will be restored to their exact state when the map was loaded. If some block types are specified in
                    `<shuffle-filter>` element, blocks of those types in the original region will be restored to a block type chosen at random from
                    the shuffleable types. The approximate proportions of block types from the original region will be preserved.

                        <renewables>
                            <renewable rate="2.5" grow="true" particles="true" sound="true" avoid-entities="true">
                                <region>
                                    <cylinder base="0,117,0" radius="6" height="13"/>
                                </region>
                                <!-- These are the blocks that will renew -->
                                <renew-filter>
                                    <any>
                                        <block>iron ore</block>
                                        <block>glowstone</block>
                                        <block>stone</block>
                                    </any>
                                </renew-filter>
                                <!-- These blocks can be replaced by renewing blocks -->
                                <replace-filter>
                                    <any>
                                        <block>air</block>
                                        <block>lava</block>
                                        <block>stationary lava</block>
                                    </any>
                                </replace-filter>
                                <!-- These blocks will switch with each other when they renew -->
                                <shuffle-filter>
                                    <any>
                                        <block>stone</block>
                                        <block>iron ore</block>
                                    </any>
                                </shuffle-filter>
                            </renewable>
                        </renewables>

                    Renewables can also accept filters. They can be referenced from the filters module or defined directly inside the `<renew-filter>`, `<replace-filter>` and `<shuffle-filter>` renewable sub-elements. These sub-elements filter the renew, replace and shuffle block definitions respectively.

                        <renewables>
                            <renewable rate="1" grow="false" sound="true">
                                <region>
                                    <region id="quarry"/>
                                </region>
                                <!-- Referenced from <filters> -->
                                <renew-filter>
                                    <filter id="quarry-renew"/>
                                </renew-filter>
                                <!-- Defined directly -->
                                <replace-filter>
                                    <any>
                                        <block>iron block</block>
                                        <block>diamond block</block>
                                        <block>gold block</block>
                                    </any>
                                </replace-filter>
                                <shuffle-filter>
                                    <not>
                                        <block>emerald block</block>
                                    </not>
                                </shuffle-filter>
                            </renewable>
                        </renewables>
